<section class="feedback-list">
	<mat-progress-spinner *ngIf="loading()" mode="indeterminate"></mat-progress-spinner>

	<p *ngIf="errorMessage()" class="error">{{ errorMessage() }}</p>

	<ng-container *ngIf="!loading() && !errorMessage()">
		<p *ngIf="!feedback().length" class="muted">No reviews yet. Be the first to share feedback after your trip.</p>

		<mat-card *ngFor="let item of feedback()" appearance="outlined" class="feedback-card">
			<mat-card-header>
				<mat-card-title>
					<mat-icon color="accent">star</mat-icon>
					{{ item.rating }}/5
				</mat-card-title>
				<mat-card-subtitle>
					{{ item.createdDate | date: 'medium' }}
				</mat-card-subtitle>
			</mat-card-header>
			<mat-card-content>
				<p>{{ item.comment || 'No additional comments.' }}</p>
			</mat-card-content>
			<mat-card-actions *ngIf="canDelete(item)">
				<button type="button" mat-button color="warn" (click)="deleteFeedback(item.id)">
					<mat-icon>delete</mat-icon>
					Delete
				</button>
			</mat-card-actions>
		</mat-card>
	</ng-container>

	<mat-paginator
		*ngIf="total() > pageSize()"
		[length]="total()"
		[pageSize]="pageSize()"
		[pageSizeOptions]="[5, 10]"
		(page)="onPageChange($event)"
	></mat-paginator>
</section>
