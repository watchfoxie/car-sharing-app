# Test configuration for Rental Service integration tests
spring:
  application:
    name: rental-service-test
  datasource:
    # Testcontainers will override these with JDBC URL automatically
    url: jdbc:tc:postgresql:16-alpine:///testdb
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        default_schema: rental
        format_sql: true
        jdbc:
          time_zone: UTC
  flyway:
    enabled: true
    schemas: rental
    baseline-on-migrate: true
    locations: classpath:db/migration
  security:
    oauth2:
      resourceserver:
        jwt:
          # Mock issuer for tests (no real Keycloak needed)
          issuer-uri: http://localhost:9999/realms/test

# Disable Eureka and Config Server for tests
eureka:
  client:
    enabled: false

# Disable Actuator for tests
management:
  endpoints:
    web:
      exposure:
        include: health

# Enable debug logging for tests
logging:
  level:
    root: INFO
    com.services.rental_service: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.springframework.jdbc.core: DEBUG
